<!DOCTYPE html>
<html>
<head>
  <title>Instagram Data Debugger</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
      background: #1a1a1a;
      color: #0f0;
    }
    .section {
      margin: 20px 0;
      padding: 15px;
      background: #2a2a2a;
      border: 1px solid #0f0;
    }
    .found { color: #0f0; }
    .missing { color: #f00; }
    pre {
      background: #000;
      padding: 10px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h1>Instagram Data Debugger</h1>
  <p>Paste this in the Console on an Instagram post page:</p>

  <pre>
// DEBUG SCRIPT - Copy everything below this line
(function() {
  console.log('=== INSTAGRAM DATA DEBUG ===');

  // Check all data sources
  console.log('1. window._sharedData:', !!window._sharedData);
  if (window._sharedData) {
    console.log('   Keys:', Object.keys(window._sharedData));
    if (window._sharedData.entry_data) {
      console.log('   entry_data keys:', Object.keys(window._sharedData.entry_data));
    }
  }

  console.log('2. window.__additionalDataLoaded__:', !!window.__additionalDataLoaded__);
  if (window.__additionalDataLoaded__) {
    console.log('   Paths:', Object.keys(window.__additionalDataLoaded__));
  }

  console.log('3. LD+JSON Scripts:', document.querySelectorAll('script[type="application/ld+json"]').length);

  console.log('4. Article images:', document.querySelectorAll('article img').length);
  console.log('5. Article videos:', document.querySelectorAll('article video').length);

  // Check for React roots
  const roots = ['#react-root', 'main', 'article', 'body'];
  console.log('6. React Fiber keys:');
  roots.forEach(selector => {
    const el = document.querySelector(selector);
    if (el) {
      const keys = Object.keys(el).filter(k =>
        k.startsWith('__react') || k.startsWith('__fiber')
      );
      console.log(`   ${selector}:`, keys);
    }
  });

  // Try to extract actual post data
  console.log('\n=== ATTEMPTING DATA EXTRACTION ===');

  // Method: Check all script tags
  const scripts = document.querySelectorAll('script:not([src])');
  let foundInScript = false;

  scripts.forEach((script, i) => {
    const content = script.textContent;
    if (content.includes('shortcode_media') ||
        content.includes('graphql') ||
        content.includes('PostPage')) {
      console.log(`Found potential data in script ${i}:`, content.substring(0, 200));
      foundInScript = true;
    }
  });

  if (!foundInScript) {
    console.log('No post data found in scripts');
  }

  // Check if we can access Instagram's internal require
  console.log('\n=== INSTAGRAM INTERNALS ===');
  console.log('window.require:', typeof window.require);
  console.log('window.requireLazy:', typeof window.requireLazy);
  console.log('window.__d:', typeof window.__d);

  console.log('\n=== CURRENT PAGE INFO ===');
  console.log('URL:', window.location.href);
  console.log('Shortcode:', window.location.pathname.match(/\/p\/([^\/\?]+)/)?.[1]);

})();
// END DEBUG SCRIPT
  </pre>

  <h2>Then paste the output here or send it to debug further!</h2>
</body>
</html>
